## 1. React Portals
### React Portals ì‚¬ìš©ì´ìœ 
: ReactëŠ” ìµœìƒìœ„ íƒœê·¸ ì•„ë˜ì˜ ëª¨ë“  ì»´í¬ë„ŒíŠ¸ë¥¼ ì§‘ì–´ë„£ëŠ” êµ¬ì¡°ì´ë‹¤.\
~> í•˜ì§€ë§Œ, ë¡œê·¸ì¸ì°½ ê°™ì€ ì»´í¬ë„ŒíŠ¸ ì‘ì„± ì‹œ ì´ëŸ° êµ¬ì¡°ë¥¼ ë²—ì–´ë‚˜ ë˜ ë‹¤ë¥¸ ìµœìƒìœ„ íƒœê·¸ì— ìœ„ì¹˜í•˜ê²Œ í•˜ê³  ì‹¶ì„ ë•Œê°€ ìˆìŒ.
``` html
<!-- html -->
...
<body>
  <div id='root'></div>
  <div id='other'></div>
</body>
...
```
``` jsx
import React from 'react'
import ReactDOM from 'react-dom'

const App = () => (
  <div>App</div>
)

ReactDOM.render(<App />, document.getElementById('root'))

const Other = () => (
  <div>Other</div>
)

ReactDOM.render(<Other />, document.getElementById('other'))
```
: ì´ëŸ° í˜•íƒœë¥¼ ì‚¬ìš©í•˜ê²Œ ë  ê²½ìš°ì—ëŠ” App ì»´í¬ë„ŒíŠ¸ì™€ Other ì»´í¬ë„ŒíŠ¸ ì‚¬ì´ì— Stateë¥¼ ê³µìœ í•˜ëŠ” ë“± ë³µì¡í•œ ë™ì‘ì´ ëŠ˜ì–´ë‚ ìˆ˜ë¡ ì ì  êµ¬ì¡°ê°€ ì´ìƒí•˜ê²Œ ë³€í•¨.\
=> __ê·¸ë˜ì„œ React Portalsë¥¼ ì‚¬ìš©í•˜ë©´????__
### React Portals ì‚¬ìš©í•˜ê¸°
: ìœ„ì˜ ë¬¸ì œë¥¼ ìš°íšŒì±… ì—†ì´ í•´ê²°ì´ ê°€ëŠ¥í•˜ë‹¤.\
: í•´ë‹¹ ì»´í¬ë„ŒíŠ¸ì˜ ì•„ë˜ê°€ ì•„ë‹ˆë¼ ë‹¤ë¥¸ íƒœê·¸ì˜ í•˜ìœ„ì— ìœ„ì¹˜í•˜ê²Œ ë§Œë“ ë‹¤. í—·ê°ˆ ã„´ã„´!!!!
#### 1. React ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œ createPortal ë¶ˆëŸ¬ì˜¤ê¸°
``` jsx
import React, { useMemo } from 'react'
import ReactDOM, { createPortal } from 'react-dom'
```
#### 2. App ì»´í¬ë„ŒíŠ¸ì— Other ì»´í¬ë„ŒíŠ¸ í¬í•¨í•˜ê¸°
``` jsx
const App = () => (
  <>
    <div>App</div>
    <Other />
  </>
)
```
#### 3. Other ì»´í¬ë„ŒíŠ¸ ì•ˆì— createPortal í•¨ìˆ˜ ì‹¤í–‰ ê°’ì„ return í•˜ê¸°.
: createPortal í•¨ìˆ˜ì˜ 1ë²ˆì§¸ íŒŒë¼ë¯¸í„°ëŠ” í™”ë©´ì— ë‚˜íƒ€ë‚¼ JSX, 2ë²ˆì§¸ íŒŒë¼ë¯¸í„°ëŠ” 1ë²ˆì§¸ íŒŒë¼ë¯¸í„°ê°€ ìœ„ì¹˜í•  íƒœê·¸ì„.
``` jsx
const Other = () => {
  return createPortal(<div>Other</div>, document.getElementById('other'))
}
```
#### 4. íš¨ìœ¨ì„ ìœ„í•´ useMemo í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ ìµœì í™”í•˜ê¸°.
> ìƒíƒœê°€ ë°”ë€Œë©´ ì»´í¬ë„ŒíŠ¸ë¥¼ ë‹¤ì‹œ ì‹¤í–‰í•˜ëŠ”ë°, ê·¸ ë•Œ ë§ˆë‹¤ document.getElementById ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— ìµœì í™”í•´ì£¼ì!
``` jsx
import React, { useMemo } from 'react'
import ReactDOM, { createPortal } from 'react-dom'

const App = () => (
  <>
    <div>App</div>
    <Other />
  </>
)

const Other = () => {
  const rootElement = useMemo(() => document.getElementById('other'))

  return createPortal(<div>Other</div>, rootElement)
}

ReactDOM.render(<App />, document.getElementById('root'))
```
### ğŸ¯ê¿€íŒ
: Portal ì»´í¬ë„ŒíŠ¸ë¡œ ë¶„ë¦¬í•˜ë©´ ë” ì½ê¸° í¸í•˜ê²Œ ì‘ì„±ê°€ëŠ¥!
``` jsx
import React, { useMemo } from 'react'
import ReactDOM, { createPortal } from 'react-dom'

const App = () => (
  <>
    <div>App</div>
    <Portal>
      <Other />
    </Portal>
  </>
)

const Portal = ({ children }) => {
  const rootElement = useMemo(() => document.getElementById('other'))

  return createPortal(children, rootElement)
}

const Other = () => (
  <div>Other</div>
)

ReactDOM.render(<App />, document.getElementById('root'))
```
## 2. React Portals í™œìš©
``` jsx
import React, { useEffect, useMemo } from 'react'
import { createPortal } from 'react-dom'

const Portal = ({ id, children }) => {
  const [parentElement, cleanupParentElement] = useMemo(() => createParentElement(id), [])

  useEffect(() => () => cleanupParentElement(), [])

  return createPortal(children, parentElement)
}

const createParentElement = id => {
  const rootElement = getRootElement(id)
  const parentElement = document.createElement('div')

  rootElement.appendChild(parentElement)

  const cleanupParentElement = () => {
    rootElement.removeChild(parentElement)
  }

  return [parentElement, cleanupParentElement]
}

const getRootElement = id => {
  const rootElement = document.getElementById(id)
  if (rootElement !== null) {
    return rootElement
  }

  const nextRootElement = document.createElement('div')
  nextRootElement.setAttribute('id', id)
  document.body.appendChild(nextRootElement)

  return nextRootElement
}
```
- getRootElement\
: í•´ë‹¹í•˜ëŠ” id ì—˜ë¦¬ë¨¼íŠ¸ë¥¼ ë¶ˆëŸ¬ì˜¤ë©°, ì—†ìœ¼ë©´ body íƒœê·¸ ì•ˆì— ì¶”ê°€
- createParentElement\
: ìœ„ì—ì„œ ë§Œë“  Root ì—˜ë¦¬ë¨¼íŠ¸ ì•ˆì— ìƒˆë¡œìš´ div ì—˜ë¦¬ë¨¼íŠ¸ë¥¼ ì¶”ê°€
- createPortal\
: ìœ„ì—ì„œ ë§Œë“  Parent ì—˜ë¦¬ë¨¼íŠ¸ì— Portal ìƒì„±
### ì¥ì 
: ê°™ì€ idì´ë©´ ê·¸ ì—˜ë¦¬ë¨¼íŠ¸ ì•ˆì— ìƒˆë¡œìš´ Parent ì—˜ë¦¬ë¨¼íŠ¸ë¥¼ ì¶”ê°€í•˜ëŠ” ì›ë¦¬ë¡œ ì¥ì ì„ ê°€ì§.
- createPortal í•¨ìˆ˜ë¥¼ ê·¸ë˜ë„ ì‚¬ìš©í•˜ëŠ” ê²ƒ ë³´ë‹¤ í¸ë¦¬
- ê²½ê³ ì°½, ê²°ì œì°½, ì„¤ì •ì°½ ë“± ì—¬ëŸ¬ ëŒ€í™”ìƒì ì»´í¬ë„ŒíŠ¸ì˜ ë…¼ë¦¬ì  ìš°ì„ ìˆœìœ„ ì •ë¦¬ì— ìš©ì´
- /public/index.html ìˆ˜ì • í•„ìš” X.
### í™œìš© ë°©ë²•
``` js
const App = () => (
  <>
    <div>App</div>
    <Dialog>
      <User />
    </Dialog>
  </>
)

const Dialog = ({ children }) => (
  <Portal id='dialog'>{children}</Portal>
)

const User = () => (
  <div>User</div>
)
```
### ì‹¬í™”
: ìœ„ì—ì„œ ì‘ì„±í•œ Portal ì»´í¬ë„ŒíŠ¸ ì‘ìš©ì‹œ, ë‹¤ì–‘í•œ ê¸°ëŠ¥ ìœ ì—°í•˜ê²Œ ì¶”ê°€ ê°€ëŠ¥.
``` js
const EscapeablePortal = ({ id, isOpen, close, children }) => {
  const closePortalToClickEscapeKey = () => {
    const closePortal = event => {
      if (event.key === 'Escape') {
        close()
      }
    }

    document.addEventListener('keydown', closePortal)

    return () => {
      document.addEventListener('keydown', closePortal)
    }
  }
  useEffect(closePortalToClickEscapeKey, [close])

  if (!isOpen) {
    return null
  }

  return (
    <Portal id={id}>{children}</Portal>
  )
}
```